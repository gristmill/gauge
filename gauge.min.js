var arc=function(b,d,c,e,f){var e=e*Math.PI/180;var a=f*Math.PI/180;var f="M "+b+" "+d;var e=" L "+(b+c*Math.cos(e))+" "+(d-c*Math.sin(e));var g=" A "+[c,c,0,0,1,b+c*Math.cos(a),d-c*Math.sin(a)].join(" ");return f+e+g};var gauge=function(e,c,d,a,b){this.canvas=Raphael(e,300,100);if(b!==undefined){if(b.threshold!==undefined){b.threshold["0"]=d;d=thresholdCalculator(b.threshold,c,d)}}this.background=this.canvas.path(arc(80,80,76,-180,0)).attr({fill:"#f2f2f2",stroke:"none"});this.fill=this.canvas.path(arc(80,80,76,-180,-180*(1+(c/100)))).attr({fill:d,stroke:"none"});this.indicator=this.canvas.rect(80,80,76,3).attr({fill:a,stroke:"none"}).rotate(180*(1+(c/100)),80,80);this.indicator.rotation=180*(1+(c/100));this.indicatorCircle=this.canvas.circle(80,80,6).attr({fill:a,stroke:"none"});return{fill:this.fill,originalFill:this.originalFill,opts:this.opts,indicator:this.indicator,canvas:this.canvas,update:function(f){this.indicator.rotate(-this.indicator.rotation,80,80).rotate(180*(1+(f/100)),80,80);this.indicator.rotation=180*(1+(f/100));if(b!==undefined){if(b.threshold!==undefined){d=thresholdCalculator(b.threshold,f)}}this.fill.animate({path:arc(80,80,76,-180,-180*(1+(f/100)))},300,"elastic").attr({fill:d,stroke:"none"})}}};function thresholdCalculator(a,c){hVal=0;fill=a["0"];for(var b in a){if(c>=b){if(hVal<=b){hVal=b;fill=a[b]}}}return fill};